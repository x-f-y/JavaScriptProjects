<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <style>
        canvas {
            display: block;
            border: 2px solid #aaa;
            margin: 0 auto;
        }
    </style>
</head>
<body>
    <canvas id="canvas" width="500" height="500">您的浏览器版本过低，请升级浏览器或者使用chrome打开！</canvas>
    <script>
        const canvas = document.getElementById('canvas')
        const ctx = canvas.getContext('2d')

        /**
         * 绘制图片相关api
         *  1. 绘制图片：
         *      drawImage(image, x, y)
         *      该方法的第一个参数image是绘制到上下文的元素，允许任何的画布图像源，例如HTMLImageElement（<img>）、
         *      HTMLVideoElement（<video>）和HTMLCanvasElement（<canvas>）等，另外两个参数x和y是其在目标canvas里的起始坐标
         *  2. 缩放：
         *      drawImage(image, x, y, width, height)
         *      该方法相比于上一个方法多了两个参数，这两个参数是用来控制图片缩放的大小
         *  3. 切片：
         *      drawImage(image, sx, sy, sWidth, sHeight, dx, dy, dWidth, dHeight)
         *      该方法的第一个参数和上面两个api是相同的，都是一个图片或者另一个canvas的引用。对于其余参数：
         *      前4个是定义图像源的切片位置和大小，后4个则是定义切片的目标显示位置和大小
         */

        const img = new Image() // 创建一个<img>元素
        img.src = '/image/dog.jpg' // 设置图片源地址
        /**
         * 插语：
         *  Image()函数将会创建一个新的HTMLImageElement实例，它的功能等价于document.createElement('img')
         *  示例：
         *  var myImage = new Image(100, 200)
         *  myImage.src = 'picture.jpg'
         *  document.body.appendChild(myImage)
         *  上面的代码相当于在<body>中定义了下面的HTML：
         *  <img width="100" height="200" src="picture.jpg">
         */
        img.onload = function(){
            console.log(img.width, img.height) // 300 200
            // 若调用drawImage时，图片没装载完，那什么都不会发生。因此应该用load事件来保证不会在加载完毕之前使用这个图片
            // ctx.drawImage(img, 200, 300)
            // ctx.drawImage(img, 350, 400, 150, 100)
            ctx.drawImage(img, 110, 20, 170, 140, 100, 100, 170, 140)
        }
    </script>
</body>
</html>