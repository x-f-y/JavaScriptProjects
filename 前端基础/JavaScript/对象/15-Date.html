<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title></title>
		<script type="text/javascript">
			/* 
				使用Date构造函数创建日期对象的四种方式
			 */
			// 如果直接使用构造函数创建一个Date对象，则会封装为当前的时间
			console.log(new Date()); // Sun Jan 15 2023 13:00:02 GMT+0800 (中国标准时间)
			// 可以在构造函数中传递一个表示时间的字符串来创建一个指定的日期对象（这种方式不推荐使用）
			console.log(new Date("2016/05/22 23:59:59")); // Sun May 22 2016 23:59:59 GMT+0800 (中国标准时间)
			// 可以在构造函数中传递一个时间戳来创建一个指定的日期对象
			console.log(new Date(1463932799000)) // Sun May 22 2016 23:59:59 GMT+0800 (中国标准时间)
			// 可以在构造函数中依次传递 年、月、日、时、分、秒、毫秒 来创建一个指定的日期对象（注意：第二个参数范围是0-11）
			console.log(new Date(2016, 4, 22, 23, 59, 59)) // Sun May 22 2016 23:59:59 GMT+0800 (中国标准时间)

			/* 
				getFullYear()获取当前时间对象是几年
				getMonth()获取当前时间对象是几月 返回0-11依次表示1月-12月
				getDate()获取当前时间对象是几日
				getDay()获取当前时间对象是周几 0表示周日
				getHours()获取当前时间对象的小时数
				getMinutes()获取当前时间对象的分钟数
				getSeconds()获取当前时间对象的秒数
				getMilliseconds()获取当前时间对象的毫秒数
			 */
			var date = new Date(2023, 0, 15)
			console.log(date.getFullYear()); // 2013
			console.log(date.getMonth() + 1); // 1
			console.log(date.getDate()); // 15
			console.log(date.getDay()); // 0
			console.log(date.getHours()); // 0
			console.log(date.getMinutes()); // 0
			console.log(date.getSeconds()); // 0
			console.log(date.getMilliseconds()); // 0

			/* 
				getTime()获取当前日期对象的时间戳
					时间戳，指的是从格林威治标准时间1970年1月1号，0时0分0秒到
					当前日期对象所花费的毫秒数
				计算机底层在保存时间时都是使用时间戳
			 */
			var time = date.getTime()/1000/60/60/24/365; // 1970/1/1到date日期对象经过的年数
			console.log(time) // 53.073059360730596
			var initialTime = new Date("1970/1/1 0:0:0").getTime();
			console.log(initialTime);// -28800000/1000/60/60=8小时（中国标准时间与格林威治时间有8小时的时差）

			//利用时间戳来测试代码执行的时间
			var start = Date.now(); // Date.now()返回自1970年1月1日00:00:00(UTC)到当前时间的毫秒数
			for(var i = 0; i < 10000000; i++);
			var end = Date.now();
			console.log("执行了" + (end-start) + "毫秒");

			// Date.prototype.toLocaleString() --> 根据本地时间将Date对象转为字符串，并返回结果
			var newDate = new Date(2022, 7, 23, 19, 19, 11)
			console.log(newDate.toLocaleString()) // 2022/8/23 19:19:11

			// 闰年的计算规则：(year % 4 === 0 && year % 100 !== 0) || year % 400 === 0 
			console.log(new Date(1999, 2, 0).getDate()) // 28 1999年2月有28天(平年)(第二个参数是monthIndex，取值范围是0-11)
			console.log(new Date(2012, 2, 0).getDate()) // 29 2012年2月有29天(闰年)(第二个参数是monthIndex，取值范围是0-11)

			// 计算还有多少天过生日
			function computeBirthday(month, day){
				const nowDate = new Date()
				const nowYear = nowDate.getFullYear()
				const birthDate = new Date(nowYear, month - 1, day)
				if(birthDate.getTime() < nowDate.getTime()){
					birthDate.setFullYear(nowYear + 1)
				}
				let timeDec = birthDate.getTime() - nowDate.getTime()
				return Math.ceil(timeDec / 1000 / 60 / 60 / 24)
			}
			console.log(computeBirthday(3, 10))
		</script>
	</head>
	<body>
	</body>
</html>
