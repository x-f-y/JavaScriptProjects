<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8">
	<title></title>
	<script type="text/javascript">
		window.onload = function () {
			/**
			 * 封装一个函数sendAJAX发送get ajax请求
			 * 	参数：url
			 * 	返回结果：promise对象
			 */
			function sendAJAX(url) {
				return new Promise((resolve, reject) => {
					const xhr = new XMLHttpRequest();
					xhr.responseType = 'json';
					xhr.open('get', url);
					xhr.send();
					xhr.onreadystatechange = function () {
						if (xhr.readyState == 4) {
							if (xhr.status >= 200 && xhr.status < 300) {
								resolve(xhr.response);
							} else {
								reject(xhr.status);
							}
						}
					};
				});
			}
			sendAJAX('https://api.apiopen.top/getJoke')
				.then(value => {
					console.log(value);
				}, reason => {
					console.warn(reason);
				})
		};
	</script>
</head>

<body>
</body>

</html>