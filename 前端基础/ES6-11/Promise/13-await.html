<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8">
	<title></title>
	<script type="text/javascript">
		/**
		 * await表达式
		 * 	await右侧的表达式一般为promise对象，但也可以是其他的值
		 * 	如果表达式是promise对象，await返回的是promise成功的值
		 * 	如果表达式是其他值，直接将此值作为await的返回值
		 * await关键字用于等待一个异步函数执行完成
		 * 注意:	1、await必须写在async函数中，但async函数中可以没有await
		 * 		2、如果await的promsie失败了，就会抛出异常，需要通过try...catch捕获处理
		 */
		async function main() {
			let p1 = new Promise((resolve, reject) => {
				resolve('ok');
			});
			let res = await p1;
			console.log(res);//ok

			let res2 = await 20;
			console.log(res2);//20

			let p2 = new Promise((resolve, reject) => {
				reject('error');
			});
			try {
				let res3 = await p2;
			} catch (e) {
				console.log(e);//error
			}
		}
		main();

		let fun = async () => {
			let p1 = new Promise((resolve, reject) => {
				resolve('ok');
			});
			let res = await p1;
			console.log(res);//ok

			let res2 = await 20;
			console.log(res2);//20

			let p2 = new Promise((resolve, reject) => {
				reject('error');
			});
			try {
				let res3 = await p2;
			} catch (e) {
				console.log(e);//error
			}
		}
		fun();

	</script>
</head>

<body>
</body>

</html>